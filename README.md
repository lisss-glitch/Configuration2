# Конфигуранционное управление
## Практическая работа №2
### Вариант №4
Разработать инструмент визуализации графа зависимостей для менеджера пакетов. Готовые средства (менеджеры пакетов, библиотеки) для получения зависимостей использовать нельзя.
### Этап 1. Минимальный прототип с конфигурацией

### Общее описание.
#### Цель: создать минимальное CLI-приложение и сделать его настраиваемым.
#### Требования:
1. Источником настраиваемых пользователем параметров является
конфигурационный файл формата CSV.
2. К настраиваемым параметрам относятся:
– Имя анализируемого пакета.
– URL-адрес репозитория или путь к файлу тестового репозитория.
– Режим работы с тестовым репозиторием.
– Версия пакета.
– Имя сгенерированного файла с изображением графа.
– Режим вывода зависимостей в формате ASCII-дерева.
– Максимальная глубина анализа зависимостей.
3. (только для этого этапа) При запуске приложения вывести все параметры,
настраиваемые пользователем, в формате ключ-значение.
4. Реализовать и продемонстрировать обработку ошибок для всех параметров.
5. Результат выполнения этапа сохранить в репозиторий стандартно
оформленным коммитом.

### Описание всех функций и настроек.
#### Функции:
* read_config_file(file_path) - читает CSV файл конфигурации и возвращает словарь параметров
* validate_config(config, validator) - проверяет конфигурацию на корректность всех параметров
* print_config(config) - выводит параметры в формате ключ-значение

### Параметры конфигурации:

- package_name - 	Имя анализируемого пакета
- repository_url - URL репозитория или путь к тестовому файлу
- test_repo_mode - Режим работы с тестовым репозиторием
- package_version	string - Версия анализируемого пакета
- output_image - Имя сгенерированного файла с изображением графа
- ascii_tree	boolean - Режим вывода зависимостей в формате ASCII-дерева
- max_depth	integer - Максимальная глубина анализа зависимостей

### Описание команд для сборки проекта и запуска тестов.
Программа требует только стандартные библиотеки Python: csv, sys, os. Тестирование проводится путем запуска приложения с передачей конфигурационного CSV-файла в качестве аргумента командной строки.

### Примеры использования.
Результат работы программы

Результат работы программы с выводом ошибки имени пакета


Результат работы программы с выводом ошибки в URL репозитория


Результат работы программы с выводом ошибки в режиме тестирования


Результат работы программы с выводом ошибки в версии пакета


Результат работы программы с выводом ошибки в имени выходного файла


Результат работы программы с выводом ошибки в ASCII режиме


Результат работы программы с выводом ошибки в максимальной глубине


Результат работы программы с выводом корректной конфигурации




### Этап 2. Сбор данных

### Общее описание.
#### Цель:  реализовать основную логику получения данных о зависимостях для их дальнейшего анализа и визуализации. Запрещено пользоваться менеджерами пакетов и сторонними библиотеками для получения информации о зависимостях пакетов.
#### Требования:
1. Использовать формат пакетов Rust (Cargo).
2. Информацию необходимо получить для заданной пользователем версии пакета.
3. Извлечь информацию о прямых зависимостях заданного пользователем пакета, используя URL-адрес репозитория.
4. (только для этого этапа) Вывести на экран все прямые зависимости заданного пользователем пакета.
5. Результат выполнения этапа сохранить в репозиторий стандартно оформленным коммитом.

### Описание всех функций и настроек.
#### Функции:
* read_config_file(file_path) - читает CSV конфигурационный файл
* validate_config(config, validator) - проверяет корректность конфигурации
* print_config(config) - выводит параметры конфигурации

### Параметры конфигурации:
* package_name - Имя анализируемого пакета
* repository_url - URL репозитория или путь к TOML файлу
* test_repo_mode - Режим работы: "true" для тестового, "false" для реального
* package_version - Версия пакета
* output_image - Имя файла для выходного изображения
* ascii_tree - Формат вывода: "true" для дерева, "false" для списка
* max_depth - Максимальная глубина рекурсивного поиска

### Описание команд для сборки проекта и запуска тестов.
Программа требует только стандартные библиотеки Python: csv, sys, os, json, urllib. Тестирование проводится путем запуска приложения с передачей конфигурационного CSV-файла в качестве аргумента командной строки.

### Примеры использования.
Результат работы программы
<img width="1919" height="747" alt="image" src="https://github.com/user-attachments/assets/180b59cf-508a-4b45-92b4-6a85a4b2ca38" />
Результат работы программы с выводом файла, который не существует
<img width="1909" height="117" alt="image" src="https://github.com/user-attachments/assets/3405e338-d86a-48fb-90b4-19ef3451755b" />
Результат работы программы с выводом пакета без зависимостей
<img width="1903" height="302" alt="image" src="https://github.com/user-attachments/assets/f0080dec-73f2-4313-b60e-9e6cfdb099ab" />
Результат работы программы с выводом несуществующего пакета
<img width="1826" height="255" alt="image" src="https://github.com/user-attachments/assets/52bd5e55-dddc-47cc-ad3b-967ea65d5d62" />
Результат работы программы с выводом несуществующей версии
<img width="1819" height="257" alt="image" src="https://github.com/user-attachments/assets/ac6aaab6-381e-4f91-af75-a604c1800fce" />
Результат работы программы с выводом пустого файла зависимостей для тестового режима
<img width="1720" height="210" alt="image" src="https://github.com/user-attachments/assets/f3c4fd4e-75a3-45b1-9bbd-090814fa2f1b" />
Результат работы программы с выводом для тестирования пустых зависимостей в тестовом режиме
<img width="1815" height="252" alt="image" src="https://github.com/user-attachments/assets/068d2ea0-8da9-4ec7-91d9-20b9623f12bb" />



### Этап 3. Основные операции

### Общее описание.
#### Цель:  построить граф зависимостей (с учетом транзитивности) и выполнить основные операции над ним.
#### Требования:
1. Получение графа зависимостей реализовать алгоритмом DFS с рекурсией.
2. Проводить анализ с учетом максимальной глубины, заданной
пользователем.
3. Корректно обработать случаи наличия циклических зависимостей.
4. Поддержать режим тестирования. Вместо URL реального репозитория, дать возможность пользователю указать путь к файлу описания графа репозитория, где пакеты называются большими латинскими буквами. Продемонстрировать функциональность этого этапа на различных случаях работы с тестовым репозиторием.
5. Результат выполнения этапа сохранить в репозиторий стандартно
оформленным коммитом.

### Описание всех функций и настроек.
#### Функции:
* interactive_mode() - режим ручного ввода пути к файлу
* file_selection_mode() - режим выбора файла из списка доступных
* main() - основная функция с выбором режима работы

### Настройки:
### Конфигурационные параметры:
* file_path	string - Путь к файлу с описанием зависимостей
* max_depth	integer - Максимальная глубина DFS обхода

### Параметры формата файлов:
* Разделитель зависимостей:
: или ->
Описание: Разделитель между пакетом и его зависимостями
* Разделитель списка зависимостей:
,
Описание: Разделитель между несколькими зависимостями
* Формат комментариев:
Символ: #
Описание: Строки, начинающиеся с #, игнорируются
* Кодировка файлов:	
UTF-8
Описание: Кодировка входных файлов

### Требования к данным:
* Имена пакетов
* Максимальная длина имени
* Минимальное количество пакетов
* Поддержка пустых зависимостей

### Параметры алгоритма.
* Алгоритм обхода - Обход в глубину
* Рекурсивная реализация - Использование рекурсии
* Обнаружение циклов - Автоматическое обнаружение циклических зависимостей
* Ограничение глубины -	Защита от бесконечной рекурсии

###Параметры вывода.
* Вывод графа - Текстовое представление графа
* Вывод DFS обхода - Результаты DFS для каждого пакета
* Вывод циклов - Текстовое представление циклов
* Статистика - Количественные показатели графа

### Параметры пользовательского интерфейса.
* Режимы работы - Ручной ввод пути и выбор из списка
* Поддержка UTF-8 - Корректное отображение символов
* Обработка ошибок ввода - Повторный запрос при неверном вводе
* Визуальные разделители - Структурирование вывода

### Ограничения системы.
* Максимальный размер файла - ограничения ОС
* Максимальное количество пакетов - ограничения рекурсии Python
* Максимальная глубина рекурсии - настраиваемая

### Описание команд для сборки проекта и запуска тестов.
Программа требует только стандартные библиотеки Python: os, collections. Тестирование проводится путем запуска приложения с передачей конфигурационного CSV-файла в качестве аргумента командной строки.

### Примеры использования.
Запуск с выбором файла из списка:
<img width="1673" height="416" alt="image" src="https://github.com/user-attachments/assets/a0580de8-598c-439c-8ae5-82b148bcce89" />
Граф с циклическими зависимостями:
<img width="947" height="659" alt="image" src="https://github.com/user-attachments/assets/379f1f21-a8d6-47b6-b755-368d396300d2" />
<img width="869" height="828" alt="image" src="https://github.com/user-attachments/assets/a3d4b0cf-b5be-47ec-ae95-a2fdef685563" />
Сложный граф зависимостей:
<img width="776" height="552" alt="image" src="https://github.com/user-attachments/assets/26164c3c-6ad6-4a2b-b50c-873895666e27" />
<img width="706" height="322" alt="image" src="https://github.com/user-attachments/assets/d6bd3462-b310-4662-9bf4-03bf0808373f" />
Простой граф зависимостей:
<img width="723" height="500" alt="image" src="https://github.com/user-attachments/assets/a0414db9-df93-4b83-8b94-7aab57ca0dfb" />
<img width="702" height="391" alt="image" src="https://github.com/user-attachments/assets/2412685a-7f8d-486e-9cd3-57c05cd45bbe" />
Вывод ошибки:
<img width="720" height="170" alt="image" src="https://github.com/user-attachments/assets/a25a10fd-8385-46e6-8ae4-fa33c4dfb7f9" />



### Этап 4. Дополнительные операции
### Общее описание.
#### Цель: выполнить дополнительные операции над графом зависимостей.
#### Требования:
1. (только для этого этапа) Поддержать режим вывода на экран порядка
загрузки зависимостей для заданного пакета. Сравнить результаты с
реальным менеджером пакетов. Если есть расхождения в результатах,
объяснить их наличие.
2. Продемонстрировать функциональность этого этапа на различных случаях
работы с тестовым репозиторием.
3. Результат выполнения этапа сохранить в репозиторий стандартно
оформленным коммитом.

### Описание всех функций и настроек.
### Функции:
#### Класс DependencyGraph
__init__(self)
* Инициализация графа зависимостей
* Создание структур для хранения графа и обнаруженных циклов

build_from_file(file_path)
* Построение графа зависимостей из файла
* Поддержка форматов: A: B, C или A -> B, C
* Валидация имен пакетов (только заглавные латинские буквы)
* Обработка комментариев (строки, начинающиеся с #)

get_load_order(package_name)
* Определение порядка загрузки зависимостей с использованием алгоритма Кана
* Топологическая сортировка графа зависимостей
* Обработка циклических зависимостей

print_load_order_analysis(package_name)
* Полный анализ порядка загрузки для заданного пакета
* Визуализация порядка загрузки
* Сравнение с реальными менеджерами пакетов
* Объяснение возможных расхождений

Основная функция main()
* Обработка аргументов командной строки
* Чтение и валидация конфигурационного файла
* Координация процесса анализа зависимостей
* Вывод результатов в требуемом формате

### Описание команд для сборки проекта и запуска тестов.
Программа требует только стандартные библиотеки Python: os, sys, csv, collections. Тестирование проводится путем запуска приложения с передачей конфигурационного CSV-файла в качестве аргумента командной строки.

### Примеры использования.
Конфигурационный файл 
<img width="1885" height="965" alt="image" src="https://github.com/user-attachments/assets/cf229164-a519-4a97-97d9-3b31e79995a3" />
Вывод при отсутствии конфигурационного файла
<img width="1902" height="55" alt="image" src="https://github.com/user-attachments/assets/465d8095-e534-40fa-99ca-496687e029d3" />
Вывод при отсутствии обязательных параметров
<img width="1884" height="56" alt="image" src="https://github.com/user-attachments/assets/ef293004-4a32-43c1-b21a-7a42e8663727" />
Вывод, когда файл зависимости не найден
<img width="1909" height="70" alt="image" src="https://github.com/user-attachments/assets/c133bf8e-8916-4806-9868-1346da8cb0f2" />
