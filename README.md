# Конфигуранционное управление 
# Выполнила: Адамович Елизавета Станиславовна ИКБО-21-24
## Практическая работа №2
### Вариант №4
Разработать инструмент визуализации графа зависимостей для менеджера пакетов. Готовые средства (менеджеры пакетов, библиотеки) для получения зависимостей использовать нельзя.
### Этап 1. Минимальный прототип с конфигурацией

### Общее описание.
#### Цель: создать минимальное CLI-приложение и сделать его настраиваемым.
#### Требования:
1. Источником настраиваемых пользователем параметров является
конфигурационный файл формата CSV.
2. К настраиваемым параметрам относятся:
– Имя анализируемого пакета.
– URL-адрес репозитория или путь к файлу тестового репозитория.
– Режим работы с тестовым репозиторием.
– Версия пакета.
– Имя сгенерированного файла с изображением графа.
– Режим вывода зависимостей в формате ASCII-дерева.
– Максимальная глубина анализа зависимостей.
3. (только для этого этапа) При запуске приложения вывести все параметры,
настраиваемые пользователем, в формате ключ-значение.
4. Реализовать и продемонстрировать обработку ошибок для всех параметров.
5. Результат выполнения этапа сохранить в репозиторий стандартно
оформленным коммитом.

### Описание всех функций и настроек.
#### Функции:
* read_config_file(file_path) - читает CSV файл конфигурации и возвращает словарь параметров
* validate_config(config, validator) - проверяет конфигурацию на корректность всех параметров
* print_config(config) - выводит параметры в формате ключ-значение

### Параметры конфигурации:

- package_name - 	Имя анализируемого пакета
- repository_url - URL репозитория или путь к тестовому файлу
- test_test_mode - Режим работы с тестовым репозиторием
- package_version - Версия анализируемого пакета
- output_image - Имя сгенерированного файла с изображением графа
- ascii_tree - Режим вывода зависимостей в формате ASCII-дерева
- max_depth - Максимальная глубина анализа зависимостей

### Описание команд для сборки проекта и запуска тестов.
Программа требует только стандартные библиотеки Python: csv, sys, os. Тестирование проводится путем запуска приложения с передачей конфигурационного CSV-файла в качестве аргумента командной строки.

### Примеры использования.
Результат работы программы
<img width="1877" height="291" alt="image" src="https://github.com/user-attachments/assets/9b2c1956-a7d1-4499-99cd-c33bebedd7f4" />

Результат работы программы с выводом ошибки имени пакета
<img width="1902" height="103" alt="image" src="https://github.com/user-attachments/assets/af3130d9-76c5-4440-a6d0-26d8d6cc23d4" />

Результат работы программы с выводом ошибки в URL репозитория
<img width="1899" height="76" alt="image" src="https://github.com/user-attachments/assets/ef6319ed-eea1-476b-85bd-11d1b169d4a8" />

Результат работы программы с выводом ошибки в режиме тестирования
<img width="1841" height="77" alt="image" src="https://github.com/user-attachments/assets/b2fdbfd6-9136-495d-acf9-492340763774" />

Результат работы программы с выводом ошибки в версии пакета
<img width="1819" height="77" alt="image" src="https://github.com/user-attachments/assets/c154bc09-5da4-405d-b76f-1362262fd128" />

Результат работы программы с выводом ошибки в имени выходного файла
<img width="1887" height="75" alt="image" src="https://github.com/user-attachments/assets/b34a9488-d8e3-406a-b565-3c0bfcb530df" />

Результат работы программы с выводом ошибки в ASCII режиме
<img width="1861" height="80" alt="image" src="https://github.com/user-attachments/assets/02bb410f-7740-41bc-ac19-c6b48a9f9aac" />

Результат работы программы с выводом ошибки в максимальной глубине
<img width="1838" height="77" alt="image" src="https://github.com/user-attachments/assets/d5104591-2854-4550-9c91-4f8a84d24e2c" />

Результат работы программы с выводом корректной конфигурации
<img width="748" height="224" alt="image" src="https://github.com/user-attachments/assets/5861a6ff-a649-4859-8736-19116442cae8" />



### Этап 2. Сбор данных

### Общее описание.
#### Цель:  реализовать основную логику получения данных о зависимостях для их дальнейшего анализа и визуализации. Запрещено пользоваться менеджерами пакетов и сторонними библиотеками для получения информации о зависимостях пакетов.
#### Требования:
1. Использовать формат пакетов Rust (Cargo).
2. Информацию необходимо получить для заданной пользователем версии пакета.
3. Извлечь информацию о прямых зависимостях заданного пользователем пакета, используя URL-адрес репозитория.
4. (только для этого этапа) Вывести на экран все прямые зависимости заданного пользователем пакета.
5. Результат выполнения этапа сохранить в репозиторий стандартно оформленным коммитом.

### Описание всех функций и настроек.
#### Функции:
* read_config_file(file_path) - читает CSV конфигурационный файл
* validate_config(config, validator) - проверяет корректность конфигурации
* print_config(config) - выводит параметры конфигурации

### Параметры конфигурации:
* package_name - Имя анализируемого пакета
* repository_url - URL репозитория или путь к TOML файлу
* test_repo_mode - Режим работы: "true" для тестового, "false" для реального
* package_version - Версия пакета
* output_image - Имя файла для выходного изображения
* ascii_tree - Формат вывода: "true" для дерева, "false" для списка
* max_depth - Максимальная глубина рекурсивного поиска

### Описание команд для сборки проекта и запуска тестов.
Программа требует только стандартные библиотеки Python: csv, sys, os, json, urllib. Тестирование проводится путем запуска приложения с передачей конфигурационного CSV-файла в качестве аргумента командной строки.

### Примеры использования.
Результат работы программы
<img width="1919" height="736" alt="image" src="https://github.com/user-attachments/assets/8ef0d14f-6f4c-4a8e-a0fa-1d34c19a6015" />
Результат работы программы с выводом файла, который не существует
<img width="1469" height="139" alt="image" src="https://github.com/user-attachments/assets/652c60b8-618b-48a8-8176-5de05d7cd8d4" />
Результат работы программы с выводом пакета без зависимостей
<img width="1464" height="296" alt="image" src="https://github.com/user-attachments/assets/bf662876-f3a6-47f0-8e7b-d1f6723d63fb" />
Результат работы программы с выводом несуществующего пакета
<img width="1451" height="273" alt="image" src="https://github.com/user-attachments/assets/f19942f5-eedf-4044-b880-a60d57cd5310" />
Результат работы программы с выводом несуществующей версии
<img width="1467" height="272" alt="image" src="https://github.com/user-attachments/assets/62c1fb0a-0755-4767-b113-012dfd0169d9" />
Результат работы программы с выводом пустого файла зависимостей для тестового режима
<img width="1461" height="232" alt="image" src="https://github.com/user-attachments/assets/729623e5-9e65-4691-85ca-a2c962d65830" />
Результат работы программы с выводом для тестирования пустых зависимостей в тестовом режиме
<img width="1470" height="403" alt="image" src="https://github.com/user-attachments/assets/ddd2e2e2-7aa6-4276-936b-94abbdac1d40" />



### Этап 3. Основные операции

### Общее описание.
#### Цель:  построить граф зависимостей (с учетом транзитивности) и выполнить основные операции над ним.
#### Требования:
1. Получение графа зависимостей реализовать алгоритмом DFS с рекурсией.
2. Проводить анализ с учетом максимальной глубины, заданной
пользователем.
3. Корректно обработать случаи наличия циклических зависимостей.
4. Поддержать режим тестирования. Вместо URL реального репозитория, дать возможность пользователю указать путь к файлу описания графа репозитория, где пакеты называются большими латинскими буквами. Продемонстрировать функциональность этого этапа на различных случаях работы с тестовым репозиторием.
5. Результат выполнения этапа сохранить в репозиторий стандартно
оформленным коммитом.

### Описание всех функций и настроек.
#### Функции:
* interactive_mode() - режим ручного ввода пути к файлу
* file_selection_mode() - режим выбора файла из списка доступных
* main() - основная функция с выбором режима работы

### Настройки:
### Конфигурационные параметры:
* file_path	string - Путь к файлу с описанием зависимостей
* max_depth	integer - Максимальная глубина DFS обхода

### Параметры формата файлов:
* Разделитель зависимостей:
: или ->
Описание: Разделитель между пакетом и его зависимостями
* Разделитель списка зависимостей:
,
Описание: Разделитель между несколькими зависимостями
* Формат комментариев:
Символ: #
Описание: Строки, начинающиеся с #, игнорируются
* Кодировка файлов:	
UTF-8
Описание: Кодировка входных файлов

### Требования к данным:
* Имена пакетов
* Максимальная длина имени
* Минимальное количество пакетов
* Поддержка пустых зависимостей

### Параметры алгоритма.
* Алгоритм обхода - Обход в глубину
* Рекурсивная реализация - Использование рекурсии
* Обнаружение циклов - Автоматическое обнаружение циклических зависимостей
* Ограничение глубины -	Защита от бесконечной рекурсии

### Параметры вывода.
* Вывод графа - Текстовое представление графа
* Вывод DFS обхода - Результаты DFS для каждого пакета
* Вывод циклов - Текстовое представление циклов
* Статистика - Количественные показатели графа

### Параметры пользовательского интерфейса.
* Режимы работы - Ручной ввод пути и выбор из списка
* Поддержка UTF-8 - Корректное отображение символов
* Обработка ошибок ввода - Повторный запрос при неверном вводе
* Визуальные разделители - Структурирование вывода

### Ограничения системы.
* Максимальный размер файла - ограничения ОС
* Максимальное количество пакетов - ограничения рекурсии Python
* Максимальная глубина рекурсии - настраиваемая

### Описание команд для сборки проекта и запуска тестов.
Программа требует только стандартные библиотеки Python: os, collections. Тестирование проводится путем запуска приложения с передачей конфигурационного CSV-файла в качестве аргумента командной строки.

### Примеры использования.
Запуск с выбором файла из списка:
<img width="1673" height="416" alt="image" src="https://github.com/user-attachments/assets/a0580de8-598c-439c-8ae5-82b148bcce89" />
Граф с циклическими зависимостями:
<img width="947" height="659" alt="image" src="https://github.com/user-attachments/assets/379f1f21-a8d6-47b6-b755-368d396300d2" />
<img width="869" height="828" alt="image" src="https://github.com/user-attachments/assets/a3d4b0cf-b5be-47ec-ae95-a2fdef685563" />
Сложный граф зависимостей:
<img width="776" height="552" alt="image" src="https://github.com/user-attachments/assets/26164c3c-6ad6-4a2b-b50c-873895666e27" />
<img width="706" height="322" alt="image" src="https://github.com/user-attachments/assets/d6bd3462-b310-4662-9bf4-03bf0808373f" />
Простой граф зависимостей:
<img width="723" height="500" alt="image" src="https://github.com/user-attachments/assets/a0414db9-df93-4b83-8b94-7aab57ca0dfb" />
<img width="702" height="391" alt="image" src="https://github.com/user-attachments/assets/2412685a-7f8d-486e-9cd3-57c05cd45bbe" />
Вывод ошибки:
<img width="720" height="170" alt="image" src="https://github.com/user-attachments/assets/a25a10fd-8385-46e6-8ae4-fa33c4dfb7f9" />



### Этап 4. Дополнительные операции
### Общее описание.
#### Цель: выполнить дополнительные операции над графом зависимостей.
#### Требования:
1. (только для этого этапа) Поддержать режим вывода на экран порядка
загрузки зависимостей для заданного пакета. Сравнить результаты с
реальным менеджером пакетов. Если есть расхождения в результатах,
объяснить их наличие.
2. Продемонстрировать функциональность этого этапа на различных случаях
работы с тестовым репозиторием.
3. Результат выполнения этапа сохранить в репозиторий стандартно
оформленным коммитом.

### Описание всех функций и настроек.
### Функции:
#### Класс DependencyGraph
__init__(self)
* Инициализация графа зависимостей
* Создание структур для хранения графа и обнаруженных циклов

build_from_file(file_path)
* Построение графа зависимостей из файла
* Поддержка форматов: A: B, C или A -> B, C
* Валидация имен пакетов (только заглавные латинские буквы)
* Обработка комментариев (строки, начинающиеся с #)

get_load_order(package_name)
* Определение порядка загрузки зависимостей с использованием алгоритма Кана
* Топологическая сортировка графа зависимостей
* Обработка циклических зависимостей

print_load_order_analysis(package_name)
* Полный анализ порядка загрузки для заданного пакета
* Визуализация порядка загрузки
* Сравнение с реальными менеджерами пакетов
* Объяснение возможных расхождений

Основная функция main()
* Обработка аргументов командной строки
* Чтение и валидация конфигурационного файла
* Координация процесса анализа зависимостей
* Вывод результатов в требуемом формате

### Описание команд для сборки проекта и запуска тестов.
Программа требует только стандартные библиотеки Python: os, sys, csv, collections. Тестирование проводится путем запуска приложения с передачей конфигурационного CSV-файла в качестве аргумента командной строки.

### Примеры использования.
Конфигурационный файл 
<img width="1885" height="965" alt="image" src="https://github.com/user-attachments/assets/cf229164-a519-4a97-97d9-3b31e79995a3" />
Вывод при отсутствии конфигурационного файла
<img width="1902" height="55" alt="image" src="https://github.com/user-attachments/assets/465d8095-e534-40fa-99ca-496687e029d3" />
Вывод при отсутствии обязательных параметров
<img width="1884" height="56" alt="image" src="https://github.com/user-attachments/assets/ef293004-4a32-43c1-b21a-7a42e8663727" />
Вывод, когда файл зависимости не найден
<img width="1909" height="70" alt="image" src="https://github.com/user-attachments/assets/c133bf8e-8916-4806-9868-1346da8cb0f2" />
